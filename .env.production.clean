# MITA Finance - Production Environment Configuration
# =======================================================
# Environment: Production
# Purpose: Live production system serving real users
# Security: Maximum security, all secrets MUST be replaced with real values
# Compliance: SOX, PCI-DSS, GDPR requirements enforced
# =======================================================

# ========================================
# ENVIRONMENT IDENTIFICATION
# ========================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# ========================================
# FEATURE FLAGS - PRODUCTION READY
# ========================================
FEATURE_FLAGS_ADMIN_ENDPOINTS=true
FEATURE_FLAGS_ADVANCED_OCR=true
FEATURE_FLAGS_AI_BUDGET_ANALYSIS=true
FEATURE_FLAGS_CIRCUIT_BREAKER=true
FEATURE_FLAGS_ENHANCED_RATE_LIMITING=true
FEATURE_FLAGS_JWT_ROTATION=true
FEATURE_FLAGS_PUSH_NOTIFICATIONS=true
FEATURE_FLAGS_DETAILED_ANALYTICS=true
FEATURE_FLAGS_DEBUG_LOGGING=false  # Never enable in production
FEATURE_FLAGS_NEW_BUDGET_ENGINE_ROLLOUT=100

# ========================================
# DATABASE CONFIGURATION - CRITICAL
# ========================================
# PostgreSQL - MUST be replaced with production credentials
DATABASE_URL=postgresql+asyncpg://postgres:REPLACE_WITH_PRODUCTION_PASSWORD@postgres:5432/mita
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_WITH_PRODUCTION_PASSWORD
POSTGRES_DB=mita
POSTGRES_PORT=5432

# ========================================
# REDIS CONFIGURATION - CRITICAL
# ========================================
# Redis - MUST be replaced with production credentials
REDIS_URL=redis://:REPLACE_WITH_REDIS_PASSWORD@redis:6379/0
REDIS_PASSWORD=REPLACE_WITH_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=50  # Production capacity
REDIS_TIMEOUT=30
REDIS_RETRY_ON_TIMEOUT=true

# ========================================
# SECURITY & AUTHENTICATION - CRITICAL
# ========================================
# CRITICAL: Replace these with strong production secrets (32+ chars)
JWT_SECRET=REPLACE_WITH_PRODUCTION_JWT_SECRET_32_CHARS_MIN
JWT_PREVIOUS_SECRET=REPLACE_WITH_PREVIOUS_JWT_SECRET_FOR_ROTATION
SECRET_KEY=REPLACE_WITH_PRODUCTION_SECRET_KEY_32_CHARS_MIN
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30  # Production security standard

# ========================================
# EXTERNAL SERVICES - CRITICAL
# ========================================
# OpenAI API - Production key required
OPENAI_API_KEY=REPLACE_WITH_PRODUCTION_OPENAI_KEY
OPENAI_MODEL=gpt-4o-mini

# Firebase/Google Cloud - Production service account
GOOGLE_APPLICATION_CREDENTIALS=/app/secrets/firebase-service-account.json

# Apple App Store - Production shared secret
APPSTORE_SHARED_SECRET=REPLACE_WITH_PRODUCTION_APPSTORE_SECRET

# Apple Push Notifications - Production configuration
APNS_KEY=/app/secrets/apns-key.p8
APNS_KEY_ID=REPLACE_WITH_PRODUCTION_APNS_KEY_ID
APNS_TEAM_ID=REPLACE_WITH_PRODUCTION_APNS_TEAM_ID
APNS_TOPIC=com.mita.finance
APNS_USE_SANDBOX=false  # Production APNs

# ========================================
# EMAIL CONFIGURATION
# ========================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=REPLACE_WITH_PRODUCTION_SENDGRID_KEY
SMTP_FROM=noreply@mita.finance

# ========================================
# MONITORING & LOGGING - PRODUCTION
# ========================================
# Sentry for error tracking - Production DSN required
SENTRY_DSN=REPLACE_WITH_PRODUCTION_SENTRY_DSN
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# ========================================
# CORS & SECURITY - PRODUCTION
# ========================================
# Production domains only
ALLOWED_ORIGINS=https://app.mita.finance,https://admin.mita.finance

# ========================================
# INFRASTRUCTURE - PRODUCTION
# ========================================
BACKEND_PORT=8000
GRAFANA_PASSWORD=REPLACE_WITH_PRODUCTION_GRAFANA_PASSWORD

# ========================================
# BACKUP & STORAGE - PRODUCTION
# ========================================
# AWS credentials for production backups
AWS_ACCESS_KEY_ID=REPLACE_WITH_PRODUCTION_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_PRODUCTION_AWS_SECRET_KEY
AWS_DEFAULT_REGION=us-east-1
BACKUP_BUCKET=mita-production-backups

# ========================================
# KUBERNETES & DEPLOYMENT - PRODUCTION
# ========================================
NAMESPACE=mita-production
CLUSTER_NAME=mita-prod-cluster

# ========================================
# PRODUCTION TASK QUEUE
# ========================================
WORKER_MAX_JOBS=100
WORKER_JOB_TIMEOUT=600
WORKER_HEARTBEAT_INTERVAL=30
ENABLE_WORKER_AUTOSCALING=false  # Handled by Kubernetes HPA
ENABLE_TASK_METRICS=true
TASK_RESULT_TTL=86400  # 24 hours
FAILED_TASK_TTL=604800  # 7 days

# ========================================
# PRODUCTION PERFORMANCE
# ========================================
# Connection pool settings for production load
REDIS_POOL_SIZE=50
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# ========================================
# PRODUCTION SECURITY HARDENING
# ========================================
# Bcrypt rounds for financial-grade security
BCRYPT_ROUNDS_PRODUCTION=12
BCRYPT_PERFORMANCE_TARGET_MS=500

# Rate limiting (handled by infrastructure but configurable)
MAX_REQUESTS_PER_MINUTE=60
MAX_LOGIN_ATTEMPTS_PER_HOUR=10

# Session security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict