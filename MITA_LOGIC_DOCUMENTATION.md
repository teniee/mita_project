# MITA - ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะปะพะณะธะบ ะฟัะธะปะพะถะตะฝะธั

> ะะพะบัะผะตะฝั ัะพะทะดะฐะฝ ะดะปั ะฟะตัะตะฝะพัะฐ ะปะพะณะธะบ ะฒ ะฝะพะฒัะน ะฟัะพะตะบั.
> ะะฐัะฐ: 2026-02-04

---

## ะกะพะดะตัะถะฐะฝะธะต

1. [ะญัะฐะฟ 1: ะะฝะฑะพัะดะธะฝะณ](#ััะฐะฟ-1-ะพะฝะฑะพัะดะธะฝะณ)
2. [ะญัะฐะฟ 2: Home Screen](#ััะฐะฟ-2-home-screen)
3. [ะญัะฐะฟ 3: ะะฐะปะตะฝะดะฐัั ะธ ะัะดะถะตั](#ััะฐะฟ-3-ะบะฐะปะตะฝะดะฐัั-ะธ-ะฑัะดะถะตั)

---

# ะญัะฐะฟ 1: ะะะะะะะะะ

## 1.1 ะะฑัะฐั ััััะบัััะฐ

ะะฝะฑะพัะดะธะฝะณ ัะพััะพะธั ะธะท **7 ัะฐะณะพะฒ** ะธ ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต ะดะปั ัะพะทะดะฐะฝะธั ะฟะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝะพะณะพ ะฑัะดะถะตัะฐ.

### ะะพััะดะพะบ ัะบัะฐะฝะพะฒ:

| ะจะฐะณ | ะญะบัะฐะฝ | ะงัะพ ัะพะฑะธัะฐะตั | ะัะพะณัะตัั |
|-----|-------|--------------|----------|
| 1 | Location | ะกััะฐะฝะฐ ะธ ััะฐั/ัะตะณะธะพะฝ | 14% |
| 2 | Income | ะะตัััะฝัะน ะดะพัะพะด + ะบะปะฐััะธัะธะบะฐัะธั | 29% |
| 3 | Expenses | ะคะธะบัะธัะพะฒะฐะฝะฝัะต ัะฐััะพะดั | 43% |
| 4 | Goals | ะคะธะฝะฐะฝัะพะฒัะต ัะตะปะธ + ัะตะปั ัะฑะตัะตะถะตะฝะธะน | 57% |
| 5 | Spending Frequency | ะงะฐััะพัะฐ ััะฐั ะฟะพ ะบะฐัะตะณะพัะธัะผ | 71% |
| 6 | Habits | ะัะตะดะฝัะต ัะธะฝะฐะฝัะพะฒัะต ะฟัะธะฒััะบะธ | 86% |
| 7 | Finish | ะัะฟัะฐะฒะบะฐ ะดะฐะฝะฝัั ะฝะฐ ัะตัะฒะตั | 100% |

---

## 1.2 ะจะฐะณ 1: Location (ะะพะบะฐัะธั)

**ะะพะฟัะพั:** "ะ ะบะฐะบะพะผ ััะฐัะต ะกะจะ ะฒั ะฝะฐัะพะดะธัะตัั?"

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะฒัะพะพะฟัะตะดะตะปะตะฝะธะต ะปะพะบะฐัะธะธ ัะตัะตะท GPS
- ะะพะธัะบ ะฟะพ ััะฐัะฐะผ
- ะกะฟะธัะพะบ ะฟะพะฟัะปััะฝัั ััะฐัะพะฒ (CA, NY, TX, FL, IL, PA)
- ะะพะปะฝัะน ัะฟะธัะพะบ ะฒัะตั ััะฐัะพะฒ

**ะกะพััะฐะฝัะตั:**
```json
{
  "countryCode": "US",
  "stateCode": "CA"
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- ะะฟัะตะดะตะปัะตั ะฟะพัะพะณะธ ะบะปะฐััะพะฒ ะดะพัะพะดะฐ (ะฒ CA ะดะพัะพะถะต ัะตะผ ะฒ TX)
- ะะปะธัะตั ะฝะฐ ะฟัะพัะตะฝัะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต ะฑัะดะถะตัะฐ (ะถะธะปัะต ะฒ CA = 42%, ะฒ TX = 35%)
- ะกะตะทะพะฝะฝัะต ะบะพััะตะบัะธัะพะฒะบะธ ะฟะพ ัะตะณะธะพะฝั

---

## 1.3 ะจะฐะณ 2: Income (ะะพัะพะด)

**ะะพะฟัะพั:** "ะะฐะบะพะน ั ะฒะฐั ััะตะดะฝะตะผะตัััะฝัะน ะดะพัะพะด?"

**ะะฐะปะธะดะฐัะธั:**
- ะะธะฝะธะผัะผ: $100/ะผะตััั
- ะะฐะบัะธะผัะผ: $1,000,000/ะผะตััั
- ะัะตะดัะฟัะตะถะดะตะฝะธะต ะตัะปะธ $100,000-$1,000,000 (ะฒะพะทะผะพะถะฝะพ ัะบะฐะทะฐะฝ ะณะพะดะพะฒะพะน)

**ะะปะฐััะธัะธะบะฐัะธั ะดะพัะพะดะฐ (5 ััะพะฒะฝะตะน):**

| ะะปะฐัั | ะะฐะทะฒะฐะฝะธะต | ะะพะดะพะฒะพะน ะดะพัะพะด (US) | ะะพะดะพะฒะพะน ะดะพัะพะด (CA) |
|-------|----------|-------------------|-------------------|
| LOW | Foundational | < $36,000 | < $44,935 |
| LOWER_MIDDLE | Rising | $36,001 - $57,600 | $44,936 - $71,896 |
| MIDDLE | Strategic Achiever | $57,601 - $86,400 | $71,897 - $107,844 |
| UPPER_MIDDLE | Optimizer | $86,401 - $144,000 | $107,845 - $179,740 |
| HIGH | Architect | > $144,000 | > $179,740 |

**ะกะพััะฐะฝัะตั:**
```json
{
  "income": 5000,
  "incomeTier": "middle"
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- ะะฟัะตะดะตะปัะตั ะฒัะต ะฟัะพัะตะฝัะฝัะต ัะฐัะฟัะตะดะตะปะตะฝะธั ะฑัะดะถะตัะฐ
- ะะปะธัะตั ะฝะฐ cooldown periods ะผะตะถะดั ะฟะพะบัะฟะบะฐะผะธ
- ะะฟัะตะดะตะปัะตั ัะปะพะถะฝะพััั ัะตะบะพะผะตะฝะดะฐัะธะน
- ะะปะธัะตั ะฝะฐ ะบะพะปะธัะตััะฒะพ ะผะตะฝัะฐะปัะฝัั "ะฑะฐะบะตัะพะฒ"

---

## 1.4 ะจะฐะณ 3: Expenses (ะคะธะบัะธัะพะฒะฐะฝะฝัะต ัะฐััะพะดั)

**ะะพะฟัะพั:** "ะะฐะบะธะต ั ะฒะฐั ัะธะบัะธัะพะฒะฐะฝะฝัะต ะตะถะตะผะตัััะฝัะต ัะฐััะพะดั?"

**ะะฐัะตะณะพัะธะธ:**
1. Rent/Mortgage (ะัะตะฝะดะฐ/ะะฟะพัะตะบะฐ)
2. Utilities (ะะพะผะผัะฝะฐะปัะฝัะต: ัะปะตะบััะธัะตััะฒะพ, ะฒะพะดะฐ, ะณะฐะท)
3. Internet & Phone (ะะฝัะตัะฝะตั ะธ ัะตะปะตัะพะฝ)
4. Insurance (ะกััะฐัะพะฒะบะฐ)
5. Car Payment (ะะฒัะพะฟะปะฐัะตะถะธ)
6. Subscriptions (ะะพะดะฟะธัะบะธ)
7. Loan Payments (ะัะตะดะธัั)
8. Childcare (ะะตััะบะธะน ัะฐะด/ะพะฑัะฐะทะพะฒะฐะฝะธะต)

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะพะถะฝะพ ะฟัะพะฟัััะธัั (Skip)
- ะัะฑะพั ะบะฐัะตะณะพัะธะน + ะฒะฒะพะด ััะผะผั ะดะปั ะบะฐะถะดะพะน
- ะกัะตััะธะบ ะฒัะฑัะฐะฝะฝัั ัะฐััะพะดะพะฒ

**ะกะพััะฐะฝัะตั:**
```json
{
  "expenses": [
    {"category": "rent", "amount": 1500},
    {"category": "utilities", "amount": 150},
    {"category": "insurance", "amount": 200}
  ]
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- ะััะธัะฐะตััั ะธะท ะดะพัะพะดะฐ ะดะปั ัะฐััะตัะฐ ะดะธัะบัะตัะธะพะฝะฝะพะณะพ ะฑัะดะถะตัะฐ
- ะะฐัะฟัะตะดะตะปัะตััั ะฝะฐ 1-ะน ะดะตะฝั ะผะตัััะฐ ะฒ ะบะฐะปะตะฝะดะฐัะต (fixed pattern)

---

## 1.5 ะจะฐะณ 4: Goals (ะฆะตะปะธ)

**ะะพะฟัะพั:** "ะะฐะบะธะต ั ะฒะฐั ัะธะฝะฐะฝัะพะฒัะต ัะตะปะธ?"

**ะัะตะดัััะฐะฝะพะฒะปะตะฝะฝัะต ัะตะปะธ:**
1. Build an emergency fund (ะกะพะทะดะฐัั ะฟะพะดััะบั ะฑะตะทะพะฟะฐัะฝะพััะธ)
2. Pay off debt (ะัะฟะปะฐัะธัั ะดะพะปะณะธ)
3. Learn budgeting (ะะฐััะธัััั ะฑัะดะถะตัะธัะพะฒะฐะฝะธั)
4. Start investing (ะะฐัะฐัั ะธะฝะฒะตััะธัะพะฒะฐัั)

**ะะพะฟะพะปะฝะธัะตะปัะฝะพ:**
- Monthly savings goal (ะฆะตะปั ะตะถะตะผะตัััะฝัั ัะฑะตัะตะถะตะฝะธะน) - ะพะฟัะธะพะฝะฐะปัะฝะพ

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะฝะพะถะตััะฒะตะฝะฝัะน ะฒัะฑะพั ัะตะปะตะน
- ะะพะถะฝะพ ะฟัะพะฟัััะธัั (Skip)

**ะกะพััะฐะฝัะตั:**
```json
{
  "goals": ["emergency_fund", "pay_debt"],
  "savingsGoalAmount": 500
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- `savingsGoalAmount` ะฒััะธัะฐะตััั ะธะท ะดะธัะบัะตัะธะพะฝะฝะพะณะพ ะฑัะดะถะตัะฐ
- ะฆะตะปะธ ะธัะฟะพะปัะทััััั ะดะปั ะฟะตััะพะฝะฐะปะธะทะฐัะธะธ ัะพะฒะตัะพะฒ ะธ challenges

---

## 1.6 ะจะฐะณ 5: Spending Frequency (ะงะฐััะพัะฐ ััะฐั)

**ะะพะฟัะพั:** "ะะฐะบ ัะฐััะพ ะฒั ััะฐัะธัะต ะฝะฐ ัะปะตะดัััะตะต?"

**3 ะบะฐัะตะณะพัะธะธ ัะพ ัะปะฐะนะดะตัะฐะผะธ (1-5 ัะบะฐะปะฐ):**

| ะะฐัะตะณะพัะธั | ะกะปะฐะนะดะตั 1 | ะกะปะฐะนะดะตั 5 |
|-----------|-----------|-----------|
| Lifestyle (Dining, coffee, entertainment) | ะะตะดะบะพ | ะัะตะฝั ัะฐััะพ |
| Shopping (Clothing, online) | ะะตะดะบะพ | ะัะตะฝั ัะฐััะพ |
| Travel (Vacations, trips) | ะะตะดะบะพ | ะัะตะฝั ัะฐััะพ |

**ะัะตะพะฑัะฐะทะพะฒะฐะฝะธะต ัะปะฐะนะดะตัะพะฒ ะฒ ัะฐััะพัั:**

| ะะฐัะฐะผะตัั | ะกะปะฐะนะดะตั 1 | ะกะปะฐะนะดะตั 5 |
|----------|-----------|-----------|
| dining_out_per_month | 3 | 15 |
| coffee_per_week | 1.5 | 7.5 |
| entertainment_per_month | 2 | 10 |
| clothing_per_month | 1 | 5 |
| transport_per_month | 4 | 20 |
| travel_per_year | 1 | 5 |

**ะกะพััะฐะฝัะตั:**
```json
{
  "spendingFrequencies": {
    "dining_out_per_month": 8,
    "coffee_per_week": 3,
    "entertainment_per_month": 4,
    "clothing_per_month": 2,
    "transport_per_month": 12,
    "travel_per_year": 2
  }
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- **ะกะะะะ ะะะะะะ** - ะพะฟัะตะดะตะปัะตั ะฝะฐ ัะบะพะปัะบะพ ะดะฝะตะน ัะฐัะฟัะตะดะตะปัะตััั ะฑัะดะถะตั ะบะฐัะตะณะพัะธะธ
- ะะฐะฟัะธะผะตั: `dining_out_per_month: 8` = ะฑัะดะถะตั ะฝะฐ ัะตััะพัะฐะฝั ัะฐัะฟัะตะดะตะปะธััั ะฝะฐ 8 ะดะฝะตะน
- ะะฟัะตะดะตะปัะตั ัะฐะฑะปะพะฝ ัะฐัะฟัะตะดะตะปะตะฝะธั (spread vs clustered)

---

## 1.7 ะจะฐะณ 6: Habits (ะัะธะฒััะบะธ)

**ะะพะฟัะพั:** "ะะฐะบะธะต ัะธะฝะฐะฝัะพะฒัะต ะฟัะธะฒััะบะธ ะฒัะตะดัั ะฒะฐะผ?"

**ะัะตะดัััะฐะฝะพะฒะปะตะฝะฝัะต ะฟัะธะฒััะบะธ:**
1. Impulse purchases (ะะผะฟัะปััะธะฒะฝัะต ะฟะพะบัะฟะบะธ)
2. No budgeting (ะััััััะฒะธะต ะฑัะดะถะตัะฐ)
3. Forget about subscriptions (ะะฐะฑัะฒะฐัั ะพ ะฟะพะดะฟะธัะบะฐั)
4. Frequent loans (ะงะฐัััะต ะทะฐะนะผั)

**ะะพะฟะพะปะฝะธัะตะปัะฝะพ:**
- ะขะตะบััะพะฒะพะต ะฟะพะปะต "Anything else?"

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะฝะพะถะตััะฒะตะฝะฝัะน ะฒัะฑะพั (ะผะธะฝะธะผัะผ 1)
- ะะพะถะฝะพ ะฟัะพะฟัััะธัั (Skip)

**ะกะพััะฐะฝัะตั:**
```json
{
  "habits": ["impulse_purchases", "no_budgeting"],
  "habitsComment": "Also spending too much on food delivery"
}
```

**ะะฐัะตะผ ะฝัะถะฝะพ:**
- ะะตััะพะฝะฐะปะธะทะฐัะธั AI-ัะพะฒะตัะพะฒ
- ะะฐัััะพะนะบะฐ ะฟัะตะดัะฟัะตะถะดะตะฝะธะน ะธ ะฝะฐะฟะพะผะธะฝะฐะฝะธะน
- ะะดะฐะฟัะฐัะธั challenges ะฟะพะด ะฟัะพะฑะปะตะผะฝัะต ะทะพะฝั

---

## 1.8 ะจะฐะณ 7: Finish (ะะฐะฒะตััะตะฝะธะต)

**ะคัะฝะบัะธะพะฝะฐะป:**
1. ะัะพะฒะตัะบะฐ ะฐััะตะฝัะธัะธะบะฐัะธะธ
2. ะัะพะฐะบัะธะฒะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ
3. ะััะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั ะปะพะบะฐะปัะฝะพ (ะดะปั ะฝะตะผะตะดะปะตะฝะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั)
4. ะัะฟัะฐะฒะบะฐ ะฝะฐ ัะตัะฒะตั ั retry logic (max 3 ะฟะพะฟััะบะธ)
5. ะะตัะตัะพะด ะฝะฐ ะณะปะฐะฒะฝัะน ัะบัะฐะฝ

**ะัะฟัะฐะฒะปัะตะผัะต ะดะฐะฝะฝัะต (ะฟะพะปะฝะฐั ััััะบัััะฐ):**
```json
{
  "region": "US-CA",
  "income": {
    "monthly_income": 5000,
    "additional_income": 500
  },
  "fixed_expenses": {
    "rent_or_mortgage": 1500,
    "utilities": 150,
    "subscriptions": 50,
    "loans": 200,
    "insurance": 200,
    "childcare_or_education": 0,
    "other_fixed": 100
  },
  "spending_habits": {
    "dining_out_per_month": 8,
    "entertainment_per_month": 4,
    "clothing_per_month": 2,
    "travel_per_year": 2,
    "coffee_per_week": 3,
    "transport_per_month": 12
  },
  "goals": {
    "savings_goal_amount_per_month": 500,
    "savings_goal_type": "emergency_fund",
    "has_emergency_fund": false,
    "all_goals": ["emergency_fund", "pay_debt"]
  }
}
```

---

## 1.9 ะงัะพ ะฟัะพะธััะพะดะธั ะฝะฐ ัะตัะฒะตัะต ะฟะพัะปะต ะพะฝะฑะพัะดะธะฝะณะฐ

```
POST /onboarding/submit
    โ
1. ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั (Pydantic schemas)
    โ
2. ะกะพััะฐะฝะตะฝะธะต monthly_income ะฒ User.monthly_income
    โ
3. generate_budget_from_answers(answers)
    โ ะะปะฐััะธัะธะบะฐัะธั ะดะพัะพะดะฐ
    โ ะะฐััะตั ะดะธัะบัะตัะธะพะฝะฝะพะณะพ ะฑัะดะถะตัะฐ
    โ ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะบะฐัะตะณะพัะธัะผ (ะฒะตัะฐ ะธะท spending_habits)
    โ
4. build_calendar(config)
    โ ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะดะฝัะผ ะผะตัััะฐ
    โ ะัะธะผะตะฝะตะฝะธะต ัะฐะฑะปะพะฝะพะฒ (spread/clustered/fixed)
    โ
5. save_calendar_for_user(db, user_id, calendar)
    โ ะกะพััะฐะฝะตะฝะธะต ะฒ DailyPlan ัะฐะฑะปะธัั
    โ
6. User.has_onboarded = True
    โ
7. Return { calendar_days, budget_plan }
```

---

# ะญัะฐะฟ 2: HOME SCREEN

## 2.1 ะกัััะบัััะฐ ะณะปะฐะฒะฝะพะณะพ ัะบัะฐะฝะฐ

ะะปะฐะฒะฝัะน ัะบัะฐะฝ ัะพััะพะธั ะธะท ัะปะตะดัััะธั ะฒะธะดะถะตัะพะฒ (ัะฒะตััั ะฒะฝะธะท):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  HEADER                                 โ
โ  "Hello, [TierName]!" + ะดะพัะพะด          โ
โ  [Profile] [Settings]                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  BALANCE CARD                           โ
โ  Current Balance: $X,XXX                โ
โ  Today Spent: $XX  |  Remaining: $XXX   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  BUDGET TARGETS        [View All โ]     โ
โ  โโโโโโโ โโโโโโโ โโโโโโโ โโโโโโโ       โ
โ  โFood โ โTransโ โEnterโ โShop โ       โ
โ  โ 51% โ โ 30% โ โ 0%  โ โ 80% โ       โ
โ  โโโโโโโ โโโโโโโ โโโโโโโ โโโโโโโ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  MINI CALENDAR (This Week)              โ
โ  Mon Tue Wed Thu Fri Sat Sun            โ
โ  [G] [G] [Y] [G] [R] [ ] [ ]            โ
โ  G=green Y=yellow R=red                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ACTIVE GOALS              [View All โ] โ
โ  ๐ฉ Emergency Fund   35%  โโโโโโโโ      โ
โ  ๐ฉ Pay off debt     60%  โโโโโโโโ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ACTIVE CHALLENGES         [View All โ] โ
โ  ๐ Save Daily      60%  Day 18/30     โ
โ  ๐ No Coffee Week  40%  Day 3/7       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  AI INSIGHTS                            โ
โ  "You're on track! 65% of budget used.  โ
โ   Keep monitoring your spending."       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  RECENT TRANSACTIONS                    โ
โ  ๐ Coffee         -$5.50    Today     โ
โ  ๐ Gas            -$45.00   Yesterday โ
โ  ๐ Amazon         -$32.99   Feb 2     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                    [+ Add Expense]      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 2.2 Header (ะะฐะณะพะปะพะฒะพะบ)

**ะัะพะฑัะฐะถะฐะตั:**
- ะัะธะฒะตัััะฒะธะต ั ะฝะฐะทะฒะฐะฝะธะตะผ ะบะปะฐััะฐ ะดะพัะพะดะฐ: "Hello, Strategic Achiever!"
- ะะตัััะฝัะน ะดะพัะพะด (ะตัะปะธ ะทะฐะฟะพะปะฝะตะฝ)
- ะะปะธ ะฟัะตะดัะฟัะตะถะดะตะฝะธะต "Complete your profile" (ะตัะปะธ ะพะฝะฑะพัะดะธะฝะณ ะฝะต ะทะฐะฒะตััะตะฝ)
- ะะปะธ "Connection issue" (ะตัะปะธ ะพัะธะฑะบะฐ ัะตัะธ)

**ะะฝะพะฟะบะธ:**
- Profile (ะฟะตัะตัะพะด ะฒ ะฟัะพัะธะปั)
- Settings (ะฟะตัะตัะพะด ะฒ ะฝะฐัััะพะนะบะธ)

**ะฆะฒะตั:** ะะฐะฒะธัะธั ะพั IncomeTier (ะบะฐะถะดัะน ะบะปะฐัั ะธะผะตะตั ัะฒะพะน primary color)

---

## 2.3 Balance Card (ะะฐััะพัะบะฐ ะฑะฐะปะฐะฝัะฐ)

**ะัะพะฑัะฐะถะฐะตั:**
- **Current Balance** - ะผะตัััะฝัะน ะฑัะดะถะตั ะธะปะธ ะพััะฐัะพะบ
- **Today Spent** - ะฟะพััะฐัะตะฝะพ ัะตะณะพะดะฝั
- **Remaining** - ะพััะฐัะพะบ ะฝะฐ ัะตะณะพะดะฝั

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /budget/live_status`

```json
{
  "monthly_budget": 5000,
  "monthly_spent": 2150,
  "daily_budget": 166.67,
  "spent_today": 45.50,
  "remaining_today": 121.17,
  "date": "2025-02-04",
  "status": "neutral",
  "on_track": true
}
```

---

## 2.4 Budget Targets (ะะฝะตะฒะฝัะต ะปะธะผะธัั)

**ะัะพะฑัะฐะถะฐะตั ะบะฐััะพัะบะธ ะฟะพ ะบะฐัะตะณะพัะธัะผ:**

| ะะฐัะตะณะพัะธั | ะะบะพะฝะบะฐ | ะฆะฒะตั |
|-----------|--------|------|
| Food & Dining | ๐ฝ restaurant | #4CAF50 green |
| Transportation | ๐ directions_car | #2196F3 blue |
| Entertainment | ๐ฌ movie | #9C27B0 purple |
| Shopping | ๐ shopping_bag | #FF9800 orange |
| Healthcare | ๐ฅ local_hospital | #F44336 red |
| Utilities | โก bolt | #607D8B gray |
| Personal | ๐ spa | #E91E63 pink |
| Other | ๐ฆ category | #795548 brown |

**ะะปั ะบะฐะถะดะพะน ะบะฐัะตะณะพัะธะธ ะฟะพะบะฐะทัะฒะฐะตั:**
- ะะบะพะฝะบะฐ + ะฝะฐะทะฒะฐะฝะธะต
- "$spent of $limit"
- ะัะพัะตะฝั ะทะฐะฟะพะปะฝะตะฝะธั
- Progress bar (ัะฒะตั ะฟะพ ััะฐัััั)
- ะกัะฐััั ะทะฝะฐัะพะบ: โ (< 70%), โ (70-90%), โ (> 90%)
- "Remaining: $XX" ะธะปะธ "Over budget: $XX"

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /budget/daily` + ะดะฐะฝะฝัะต ะบะฐะปะตะฝะดะฐัั

---

## 2.5 Mini Calendar (ะะธะฝะธ-ะบะฐะปะตะฝะดะฐัั ะฝะตะดะตะปะธ)

**ะัะพะฑัะฐะถะฐะตั 7 ะดะฝะตะน ัะตะบััะตะน ะฝะตะดะตะปะธ:**

```
Mon   Tue   Wed   Thu   Fri   Sat   Sun
[๐ข] [๐ข] [๐ก] [๐ข] [๐ด] [โซ] [โซ]
```

**ะฆะฒะตัะฐ ััะฐัััะฐ:**
- ๐ข Green (good) - ะฟะพััะฐัะตะฝะพ < 80% ะปะธะผะธัะฐ
- ๐ก Yellow (warning) - ะฟะพััะฐัะตะฝะพ 80-100% ะปะธะผะธัะฐ
- ๐ด Red (over) - ะฟะพััะฐัะตะฝะพ > 100% ะปะธะผะธัะฐ
- โซ Gray (neutral) - ะฝะตั ะดะฐะฝะฝัั (ะฑัะดััะธะต ะดะฝะธ)

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /calendar/current-month`

**ะะพะณะธะบะฐ ะพะฟัะตะดะตะปะตะฝะธั ััะฐัััะฐ:**
```python
ratio = spent / limit
if ratio > 1.0:
    status = "over"      # red
elif ratio >= 0.8:
    status = "warning"   # yellow
elif ratio > 0:
    status = "good"      # green
else:
    status = "neutral"   # gray
```

---

## 2.6 Active Goals (ะะบัะธะฒะฝัะต ัะตะปะธ)

**ะัะพะฑัะฐะถะฐะตั ะดะพ 3 ะฐะบัะธะฒะฝัั ัะตะปะตะน:**
- ะัะธะพัะธัะตั (High/Medium/Low) ั ะธะบะพะฝะบะพะน ะธ ัะฒะตัะพะผ
- ะะฐะทะฒะฐะฝะธะต ัะตะปะธ
- ะะฐัะตะณะพัะธั (badge)
- ะัะพะณัะตัั-ะฑะฐั
- "$saved / $target"
- "XX%"
- Warning ะตัะปะธ overdue (ะดะฐัะฐ ัะตะปะธ ะฟัะพัะปะฐ)

**Badges ะฒ ะทะฐะณะพะปะพะฒะบะต:**
- "N near completion" - ะตัะปะธ progress >= 80%
- "N overdue" - ะตัะปะธ target_date < today

**ะัััะพะต ัะพััะพัะฝะธะต:** "No active goals. Create one to start tracking!"

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /dashboard` โ goals

---

## 2.7 Active Challenges (ะะบัะธะฒะฝัะต ะฒัะทะพะฒั)

**ะัะพะฑัะฐะถะฐะตั ะดะพ 3 ะฐะบัะธะฒะฝัั challenges:**
- ะะบะพะฝะบะฐ ะฒัะทะพะฒะฐ
- ะะฐะทะฒะฐะฝะธะต
- ะกะปะพะถะฝะพััั (Easy/Medium/Hard)
- ะะปะธัะตะปัะฝะพััั (X days)
- ะัะพะณัะตัั (X% completed)
- Days completed: X/Y
- Current streak: X

**Stats ะฒ ะทะฐะณะพะปะพะฒะบะต:**
- "N completed this month"
- "Streak: N days"

**ะัััะพะต ัะพััะพัะฝะธะต:** "No active challenges. Join one!"

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /dashboard` โ challenges

---

## 2.8 AI Insights (AI-ะธะฝัะฐะนัั)

**ะัะพะฑัะฐะถะฐะตั ะพะดะฝั ะบะฐััะพัะบั ั ัะพะฒะตัะพะผ:**

| Spending Rate | ะะฐะณะพะปะพะฒะพะบ | ะฆะฒะตั |
|---------------|-----------|------|
| 0% (ะฝะตั ััะฐะฝะทะฐะบัะธะน) | Getting Started | Gray |
| < 60% | Excellent | Green |
| 60-80% | On Track | Orange |
| > 80% | Budget Alert | Red |

**ะัะธะผะตัั ัะตะบััะพะฒ:**
- "You've spent 85% of your monthly budget. Consider reducing discretionary spending."
- "You're on track! 65% of budget used. Keep monitoring your spending."
- "Great job! Only 40% of budget used. You're managing well."

**ะะฐััะตั:** ะะพะบะฐะปัะฝะพ ะฝะฐ ะพัะฝะพะฒะต `total_spent / monthly_income * 100`

---

## 2.9 Recent Transactions (ะะพัะปะตะดะฝะธะต ััะฐะฝะทะฐะบัะธะธ)

**ะัะพะฑัะฐะถะฐะตั ะฟะพัะปะตะดะฝะธะต 10 ััะฐะฝะทะฐะบัะธะน:**
- ะะบะพะฝะบะฐ ะบะฐัะตะณะพัะธะธ
- ะะฟะธัะฐะฝะธะต ะพะฟะตัะฐัะธะธ
- ะะฐัะตะณะพัะธั (badge)
- ะกัะผะผะฐ (ั ะผะธะฝััะพะผ)
- ะะฐัะฐ (Today / Yesterday / Feb 2)

**ะััะพัะฝะธะบ ะดะฐะฝะฝัั:** `GET /transactions?limit=10`

---

## 2.10 FAB (Floating Action Button)

**ะะฝะพะฟะบะฐ "Add Expense":**
- ะะบะพะฝะบะฐ: +
- ะะตัะตัะพะด ะฝะฐ ัะบัะฐะฝ ะดะพะฑะฐะฒะปะตะฝะธั ัะฐััะพะดะฐ
- ะกะบัััะฐ ะตัะปะธ loading ะธะปะธ ะพัะธะฑะบะฐ

---

## 2.11 Data Loading Flow

```
MainScreen.initState()
    โ
_initializeProviders()
    โโโ UserProvider.initialize()
    โ   โโโ loadUserProfile()         โ GET /users/me
    โ   โโโ loadFinancialContext()
    โ
    โโโ BudgetProvider.initialize()
    โ   โโโ loadAllBudgetData() [ะฟะฐัะฐะปะปะตะปัะฝะพ]:
    โ       โโโ loadDailyBudgets()          โ GET /budget/daily
    โ       โโโ loadLiveBudgetStatus()      โ GET /budget/live_status
    โ       โโโ loadBudgetSuggestions()     โ GET /budget/suggestions
    โ       โโโ loadBudgetMode()            โ GET /budget/mode
    โ       โโโ loadRedistributionHistory() โ GET /budget/redistribution_history
    โ       โโโ loadCalendarData()          โ GET /calendar/current-month
    โ
    โโโ TransactionProvider.initialize()
        โโโ loadRecentTransactions(days: 7, limit: 50) โ GET /transactions
```

---

# ะญัะฐะฟ 3: ะะะะะะะะะฌ ะ ะะฎะะะะข

## 3.1 ะะฑัะฐั ะฐััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    BUDGET & CALENDAR SYSTEM                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                              โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                 โ
โ  โ   ะะะะะะะะะ     โโโโโถโ  BUDGET PLANNER โ                 โ
โ  โ   (answers)     โ    โ  (ะณะตะฝะตัะฐัะธั)    โ                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโฌโโโโโโโโโ                 โ
โ                                  โ                           โ
โ                                  โผ                           โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                 โ
โ  โ INCOME CLASS    โโโโโถโ CALENDAR ENGINE โ                 โ
โ  โ SERVICE         โ    โ (ัะฐัะฟัะตะดะตะปะตะฝะธะต) โ                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโฌโโโโโโโโโ                 โ
โ                                  โ                           โ
โ                                  โผ                           โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                 โ
โ  โ DYNAMIC         โโโโโถโ   DAILY PLAN    โ                 โ
โ  โ THRESHOLDS      โ    โ   (ะะ ัะฐะฑะปะธัะฐ)  โ                 โ
โ  โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ                 โ
โ                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 3.2 Budget Planner - ะะตะฝะตัะฐัะธั ะฑัะดะถะตัะฐ

### ะัะพะดะฝัะต ะดะฐะฝะฝัะต (ะธะท ะพะฝะฑะพัะดะธะฝะณะฐ):

```python
answers = {
    "region": "US-CA",
    "income": {
        "monthly_income": 5000,
        "additional_income": 500
    },
    "fixed_expenses": {
        "rent": 1500,
        "insurance": 200,
        "utilities": 150
    },
    "goals": {
        "savings_goal_amount_per_month": 500
    },
    "spending_habits": {
        "coffee_per_week": 3,
        "dining_out_per_month": 8,
        "entertainment_per_month": 4,
        "clothing_per_month": 2,
        "travel_per_year": 6,
        "transport_per_month": 200
    }
}
```

### ะะปะณะพัะธัะผ (5 ัะฐะณะพะฒ):

**ะจะะ 1: ะะปะฐััะธัะธะบะฐัะธั ะดะพัะพะดะฐ**
```python
income_tier = classify_income(5500, "US-CA")
# โ IncomeTier.MIDDLE (ะณะพะดะพะฒะพะน ะดะพัะพะด 66000$)
```

**ะจะะ 2: ะะฐััะตั ะดะธัะบัะตัะธะพะฝะฝะพะณะพ ะฑัะดะถะตัะฐ**
```python
total_income = 5000 + 500 = 5500
fixed_total = 1500 + 200 + 150 = 1850
savings = 500
discretionary = 5500 - 1850 - 500 = 3150
```

**ะจะะ 3: ะััะธัะปะตะฝะธะต ะฒะตัะพะฒ ะธะท ะฟัะธะฒััะตะบ**
```python
# ะะพะฝะฒะตััะธััะตะผ ัะฐััะพัั ะฒ ะผะตัััะฝัะต ะทะฝะฐัะตะฝะธั
freq_weights = {
    "dining out": 8,           # ัะฐะท ะฒ ะผะตััั
    "entertainment": 4,        # ัะฐะท ะฒ ะผะตััั
    "clothing": 2,             # ัะฐะท ะฒ ะผะตััั
    "travel": 0.5,             # 6/ะณะพะด = 0.5/ะผะตััั
    "coffee": 12,              # 3/ะฝะตะดะตะปั ร 4 = 12/ะผะตััั
    "transport": 200           # ััะผะผะฐ ะบะฐะบ ะตััั
}
total_freq = 226.5

# ะะพัะผะฐะปะธะทัะตะผ ะฒ ะฟัะพัะตะฝัั
weights = {
    "dining out": 8/226.5 = 0.0353 (3.5%),
    "coffee": 12/226.5 = 0.0530 (5.3%),
    "entertainment": 4/226.5 = 0.0177 (1.8%),
    ...
}
```

**ะจะะ 4: ะะฐัะฟัะตะดะตะปะตะฝะธะต ะดะธัะบัะตัะธะพะฝะฝะพะณะพ ะฑัะดะถะตัะฐ**
```python
discretionary_breakdown = {
    "dining out": 3150 ร 0.0353 = $111.25,
    "entertainment": 3150 ร 0.0177 = $55.75,
    "clothing": 3150 ร 0.0088 = $27.72,
    "travel": 3150 ร 0.0022 = $6.93,
    "coffee": 3150 ร 0.0530 = $166.95,
    "transport": 3150 ร 0.8830 = $2780.45
}
```

**ะจะะ 5: ะคะธะฝะฐะปัะฝัะน ะฒัะฒะพะด**
```json
{
  "user_class": "middle",
  "total_income": 5500.00,
  "fixed_expenses_total": 1850.00,
  "discretionary_total": 3150.00,
  "savings_goal": 500.00,
  "discretionary_breakdown": {
    "dining out": 111.25,
    "entertainment": 55.75,
    "clothing": 27.72,
    "travel": 6.93,
    "coffee": 166.95,
    "transport": 2780.45
  }
}
```

---

## 3.3 Income Classification Service

### 5 ะบะปะฐััะพะฒ ะดะพัะพะดะฐ:

| ะะปะฐัั | IncomeTier | ะะพะดะพะฒะพะน (US) | ะะพะดะพะฒะพะน (CA) | ะะตัััะฝัะน (CA) |
|-------|------------|--------------|--------------|---------------|
| LOW | low | < $36,000 | < $44,935 | < $3,745 |
| LOWER_MIDDLE | lower_middle | $36K - $57.6K | $44.9K - $71.9K | $3,745 - $5,991 |
| MIDDLE | middle | $57.6K - $86.4K | $71.9K - $107.8K | $5,991 - $8,987 |
| UPPER_MIDDLE | upper_middle | $86.4K - $144K | $107.8K - $179.7K | $8,987 - $14,978 |
| HIGH | high | > $144,000 | > $179,740 | > $14,978 |

### ะะปะธัะฝะธะต ะบะปะฐััะฐ ะฝะฐ ะฑัะดะถะตั:

**LOW income (ะฝะธะทะบะธะน ะดะพัะพะด):**
```
โโโ ะะธะปัะต: 42%
โโโ ะะดะฐ: 16%
โโโ ะขัะฐะฝัะฟะพัั: 14%
โโโ ะะพะผะผัะฝะฐะปัะฝัะต: 8%
โโโ ะะดัะฐะฒะพะพััะฐะฝะตะฝะธะต: 6%
โโโ ะะฐะทะฒะปะตัะตะฝะธั: 4%
โโโ ะกะฑะตัะตะถะตะฝะธั: 5%
```

**MIDDLE income (ััะตะดะฝะธะน ะดะพัะพะด):**
```
โโโ ะะธะปัะต: 35%
โโโ ะะดะฐ: 12%
โโโ ะขัะฐะฝัะฟะพัั: 14%
โโโ ะะพะผะผัะฝะฐะปัะฝัะต: 6%
โโโ ะะดัะฐะฒะพะพััะฐะฝะตะฝะธะต: 5%
โโโ ะะฐะทะฒะปะตัะตะฝะธั: 8%
โโโ ะกะฑะตัะตะถะตะฝะธั: 13%
```

**HIGH income (ะฒััะพะบะธะน ะดะพัะพะด):**
```
โโโ ะะธะปัะต: 28%
โโโ ะะดะฐ: 8%
โโโ ะขัะฐะฝัะฟะพัั: 10%
โโโ ะะฝะฒะตััะธัะธะธ: 15%
โโโ ะะฐะทะฒะปะตัะตะฝะธั: 12%
โโโ ะกะฑะตัะตะถะตะฝะธั: 15%
```

---

## 3.4 ะะตะณะธะพะฝะฐะปัะฝัะต ะบะพััะตะบัะธัะพะฒะบะธ (Country Profiles)

### ะะพัะพะณะธ ะฟะพ ัะตะณะธะพะฝะฐะผ:

```yaml
# US (ะฝะฐัะธะพะฝะฐะปัะฝัะน)
class_thresholds:
  low: 36000
  lower_middle: 57600
  middle: 86400
  upper_middle: 144000

# US-CA (ะะฐะปะธัะพัะฝะธั - ะดะพัะพะถะต ะฝะฐ ~25%)
class_thresholds:
  low: 44935
  lower_middle: 71896
  middle: 107844
  upper_middle: 179740
```

### ะกะตะทะพะฝะฝัะต ะบะพััะตะบัะธัะพะฒะบะธ:

```yaml
seasonal_factors:
  winter:
    utilities: 1.1      # +10% ะฝะฐ ะพัะพะฟะปะตะฝะธะต
    clothing: 1.15      # +15% ะฝะฐ ัะตะฟะปัั ะพะดะตะถะดั
  summer:
    travel: 1.2         # +20% ะฝะฐ ะฟััะตัะตััะฒะธั
    utilities: 0.95     # -5% ะบะพะฝะดะธัะธะพะฝะธัะพะฒะฐะฝะธะต
```

---

## 3.5 Calendar Engine - ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะดะฝัะผ

### ะขัะธ ัะฐะฑะปะพะฝะฐ ัะฐัะฟัะตะดะตะปะตะฝะธั:

#### ะจะะะะะ 1: "SPREAD" (ะะฐะทะฑัะพั)
**ะะปั:** groceries, coffee, transport (ะตะถะตะดะฝะตะฒะฝัะต ััะฐัั)

```
ะะปะณะพัะธัะผ:
1. ะััะธะปัััะพะฒะฐัั ัะฐะฑะพัะธะต ะดะฝะธ
2. ะัะฟะพะปัะทะพะฒะฐัั user_frequency ะธะท ะพะฝะฑะพัะดะธะฝะณะฐ
3. ะะฐัะฟัะตะดะตะปะธัั ัะฐะฒะฝะพะผะตัะฝะพ

ะัะธะผะตั: coffee $168/ะผะตััั, coffee_per_week: 3
โ 12 ะดะฝะตะน ะฒ ะผะตััั (3 ร 4 ะฝะตะดะตะปะธ)
โ $14 ะฝะฐ ะบะฐะถะดัะน ะธะท 12 ะดะฝะตะน (ะฟะฝ, ัั, ะฟั ะบะฐะถะดะพะน ะฝะตะดะตะปะธ)
```

#### ะจะะะะะ 2: "CLUSTERED" (ะกะบะพะฟะปะตะฝะธะต)
**ะะปั:** entertainment, dining out, clothing, shopping (ะฒััะพะดะฝัะต ััะฐัั)

```
ะะปะณะพัะธัะผ:
1. ะะฐะนัะธ ะฒััะพะดะฝัะต ะดะฝะธ
2. ะัะฟะพะปัะทะพะฒะฐัั user_frequency
3. ะัะปะธ ะฒััะพะดะฝัั ะผะฐะปะพ - ะดะพะฑะฐะฒะธัั ัะฐะฑะพัะธะต ะดะฝะธ
4. ะกะบะพะฝัะตะฝััะธัะพะฒะฐัั ะฑัะดะถะตั ะฝะฐ ะฒัะฑัะฐะฝะฝัั ะดะฝัั

ะัะธะผะตั: entertainment $200/ะผะตััั, entertainment_per_month: 4
โ ะัะฑัะฐัั 4 ะฒััะพะดะฝัั ะดะฝั
โ $50 ะฝะฐ ะบะฐะถะดัะน ะธะท 4 ะดะฝะตะน (ัะฑ ะบะฐะถะดะพะน ะฝะตะดะตะปะธ)
```

#### ะจะะะะะ 3: "FIXED" (ะคะธะบัะธัะพะฒะฐะฝะฝัะน)
**ะะปั:** rent, utilities, insurance, subscriptions (ัะฐะทะพะฒัะต ะฟะปะฐัะตะถะธ)

```
ะะปะณะพัะธัะผ:
1. ะะฟัะตะดะตะปะธัั ะดะตะฝั ะฟะปะฐัะตะถะฐ (ะพะฑััะฝะพ 1-ะน ะธะปะธ 5-ะน ะดะตะฝั ะผะตัััะฐ)
2. ะะฐะทะฝะฐัะธัั ะฒัั ััะผะผั ะฝะฐ ััะพั ะดะตะฝั

ะัะธะผะตั: rent $1500
โ ะะตะฝั 1 ะผะตัััะฐ: $1500
```

### ะะฐะฟะฟะธะฝะณ ะบะฐัะตะณะพัะธะน ะฝะฐ ัะฐะฑะปะพะฝั:

```python
CATEGORY_PATTERNS = {
    # FIXED - ัะฐะทะพะฒัะต ะฟะปะฐัะตะถะธ
    "rent": "fixed",                  # 1-ะณะพ ัะธัะปะฐ
    "mortgage": "fixed",              # 1-ะณะพ ัะธัะปะฐ
    "utilities": "fixed",             # 5-ะณะพ ัะธัะปะฐ
    "insurance": "fixed",             # 1-ะณะพ ัะธัะปะฐ
    "subscriptions": "fixed",         # 1-ะณะพ ัะธัะปะฐ
    "gym_fitness": "fixed",           # 1-ะณะพ ัะธัะปะฐ

    # SPREAD - ะตะถะตะดะฝะตะฒะฝัะต ััะฐัั
    "groceries": "spread",            # ะะพ ัะฐะฑะพัะธะผ ะดะฝัะผ
    "coffee": "spread",               # ะะพ ัะฐะฑะพัะธะผ ะดะฝัะผ
    "transport_public": "spread",     # ะะถะตะดะฝะตะฒะฝะพ

    # CLUSTERED - ะฟะตัะธะพะดะธัะตัะบะธะต ััะฐัั
    "dining_out": "clustered",        # ะััะพะดะฝัะต
    "entertainment": "clustered",     # ะััะพะดะฝัะต
    "clothing": "clustered",          # ะััะพะดะฝัะต ัะพะฟะธะฝะณ
    "shopping": "clustered",          # ะััะพะดะฝัะต
    "transport_gas": "clustered",     # ะะพะณะดะฐ ะทะฐะฟัะฐะฒะปัะตััั
    "travel": "clustered"             # ะะตะดะบะพ, ะฑะพะปััะธะต ััะผะผั
}
```

---

## 3.6 Dynamic Thresholds - ะฃะผะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต

### ะฃัะพะฒะตะฝั 1: Time Bias (ัะผะตัะตะฝะธะต ะฟะพ ะดะฝัะผ ะฝะตะดะตะปะธ)

ะะฐะถะดะฐั ะบะฐัะตะณะพัะธั ะธะผะตะตั ะฟะฐััะตัะฝ ะฟัะตะดะฟะพััะตะฝะธะน ะฟะพ ะดะฝัะผ (Mon=0, Sun=6):

```python
TIME_BIAS = {
    "entertainment": [0.1, 0.1, 0.1, 0.2, 0.6, 0.9, 1.0],  # ะะธะบ ะฒ ะฒััะพะดะฝัะต
    "dining_out":    [0.1, 0.1, 0.2, 0.4, 0.8, 1.0, 0.9],  # ะะธะบ Fri-Sat
    "groceries":     [0.8, 0.8, 0.8, 0.7, 0.6, 0.3, 0.3],  # ะัะดะฝะธ
    "transport":     [0.7, 0.7, 0.7, 0.7, 0.7, 0.2, 0.2],  # ะะฐะฑะพัะธะต ะดะฝะธ
    "clothing":      [0.1, 0.1, 0.1, 0.2, 0.5, 1.0, 0.9],  # ะััะพะดะฝัะต
    "coffee":        [0.9, 0.9, 0.9, 0.9, 0.8, 0.3, 0.2]   # ะะฐะฑะพัะธะต ะดะฝะธ
}
```

### ะฃัะพะฒะตะฝั 2: Cooldown Period (ะฟะตัะตััะฒ ะผะตะถะดั ะฟะพะบัะฟะบะฐะผะธ)

**ะะฐะทะพะฒัะต ะทะฝะฐัะตะฝะธั:**
```python
BASE_COOLDOWNS = {
    "entertainment": 3,    # ะะต ัะฐัะต 1 ัะฐะทะฐ ะฒ 3 ะดะฝั
    "dining_out": 2,       # ะะพะถะฝะพ ัะฐะท ะฒ 2 ะดะฝั max
    "clothing": 7,         # ะะฐะท ะฒ ะฝะตะดะตะปั
    "groceries": 1,        # ะะพะถะฝะพ ะบะฐะถะดัะน ะดะตะฝั
    "utilities": 0         # No cooldown (ัะธะบัะธัะพะฒะฐะฝะฝัะน ะฟะปะฐัะตะถ)
}
```

**ะะพััะตะบัะธัะพะฒะบะฐ ะฟะพ ะบะปะฐััั ะดะพัะพะดะฐ:**
```python
COOLDOWN_MULTIPLIERS = {
    "low": 1.5,           # ะะพะปััะต ัะฐะผะพะพะณัะฐะฝะธัะตะฝะธั
    "lower_middle": 1.2,
    "middle": 1.0,        # ะะฐะทะพะฒะพะต ะทะฝะฐัะตะฝะธะต
    "upper_middle": 0.8,  # ะะตะฝะตะต ัััะพะณะพ
    "high": 0.6           # ะะฐะบัะธะผะฐะปัะฝะพ ะณะธะฑะบะพ
}

# ะัะธะผะตั: entertainment ะดะปั LOW class
# cooldown = 3 ร 1.5 = 4.5 โ 5 ะดะฝะตะน ะผะตะถะดั ะฟะพะบัะฟะบะฐะผะธ
```

### ะฃัะพะฒะตะฝั 3: Behavioral Triggers (ััะธะณะณะตัั ะฟัะตะดัะฟัะตะถะดะตะฝะธะน)

```python
TRIGGERS = {
    "impulse_buying": monthly_income ร 0.02,      # > 2% ะดะพัะพะดะฐ = ะธะผะฟัะปัั
    "concentration_threshold": 0.5,                # ะะต ะฑะพะปะตะต 50% ะฒ ะพะดะฝั ะบะฐัะตะณะพัะธั
    "overspending_alert_discretionary": 1.15,     # ะะฐ 15% ะฒััะต ะฑัะดะถะตัะฐ
    "overspending_alert_necessary": 1.25          # ะะฐ 25% ะฒััะต (ะตะดะฐ, ะถะธะปัะต)
}
```

### ะฃัะพะฒะตะฝั 4: Mental Accounting (ะผะตะฝัะฐะปัะฝัะต ััะตัะฐ)

```python
MENTAL_BUCKETS = {
    "low": 2,        # ["essential", "non-essential"]
    "middle": 6,     # ["fixed", "variable", "emergency", "short_term", "long_term", "other"]
    "high": 10       # [ะผะฝะพะถะตััะฒะพ ัะปะพะถะฝัั ะฑะฐะบะตัะพะฒ ะดะปั ะธะฝะฒะตััะธัะธะน]
}
```

---

## 3.7 Budget Redistributor - ะะตัะตัะฐัะฟัะตะดะตะปะตะฝะธะต

### ะะพะณะดะฐ ะธัะฟะพะปัะทัะตััั:
- ะะพะปัะทะพะฒะฐัะตะปั ะฟะตัะตัะฐััะพะดะพะฒะฐะป ะฒ ะพะดะธะฝ ะดะตะฝั
- ะััั ัะบะพะฝะพะผะธั ะฒ ะดััะณะธะต ะดะฝะธ
- ะัะถะฝะพ ะฟะตัะตะฝะตััะธ ััะตะดััะฒะฐ

### ะะปะณะพัะธัะผ:

```
ะะฅะะ: {"1": {"total": 45, "limit": 30}, "2": {"total": 10, "limit": 30}}
       ะะตะฝั 1: ะฟะพััะฐัะตะฝะพ 45, ะปะธะผะธั 30 (ะดะตัะธัะธั -15)
       ะะตะฝั 2: ะฟะพััะฐัะตะฝะพ 10, ะปะธะผะธั 30 (ะฟัะพัะธัะธั +20)

ะะะะะะะขะ:
1. ะะฟัะตะดะตะปะธัั ะดะฝะธ ั ะธะทะปะธัะบะฐะผะธ (over_days): total > limit
2. ะะฟัะตะดะตะปะธัั ะดะฝะธ ั ะดะตัะธัะธัะฐะผะธ (under_days): total < limit
3. ะััะพััะธัะพะฒะฐัั ะฟะพ ัะฐะทะผะตัั (ะฑะพะปััะต ะฟะตัะฒัะผะธ)
4. ะะฐะดะฝัะน ะฟะตัะตะฝะพั:
   FOR ะบะฐะถะดะพะณะพ ะดะฝั ั ะธะทะปะธัะบะพะผ (donor):
       FOR ะบะฐะถะดะพะณะพ ะดะฝั ั ะดะตัะธัะธัะพะผ (recipient):
           amount = MIN(donor_overage, recipient_shortfall)
           IF amount > 0:
               donor.total -= amount
               recipient.total += amount
               transfers.append((donor, recipient, amount))

ะะซะฅะะ: ะกะบะพััะตะบัะธัะพะฒะฐะฝะฝัะน ะบะฐะปะตะฝะดะฐัั + ะปะพะณะธ ะฟะตัะตะฒะพะดะพะฒ
```

---

## 3.8 DailyPlan - ะะพะดะตะปั ะฑะฐะทั ะดะฐะฝะฝัั

```python
class DailyPlan:
    id: UUID                    # Primary key
    user_id: UUID               # ะะพะปัะทะพะฒะฐัะตะปั
    date: DateTime              # ะะฐัะฐ
    category: String            # ะะฐัะตะณะพัะธั ("groceries", "rent", etc.)
    planned_amount: Decimal     # ะัะดะถะตั ะฝะฐ ะบะฐัะตะณะพัะธั ะฒ ััะพั ะดะตะฝั
    spent_amount: Decimal       # ะคะฐะบัะธัะตัะบะธ ะฟะพััะฐัะตะฝะพ
    daily_budget: Decimal       # ะะฑัะธะน ะดะฝะตะฒะฝะพะน ะปะธะผะธั
    status: String              # "green", "yellow", "red"
    plan_json: JSONB            # ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะดะฐะฝะฝัะต
    created_at: DateTime
```

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะกะพะทะดะฐะตััั ะฟัะธ ะทะฐะฒะตััะตะฝะธะธ ะพะฝะฑะพัะดะธะฝะณะฐ
- ะะฑะฝะพะฒะปัะตััั ะฟัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ััะฐะฝะทะฐะบัะธะน
- ะงะธัะฐะตััั ะดะปั ะพัะพะฑัะฐะถะตะฝะธั ะบะฐะปะตะฝะดะฐัั

---

## 3.9 API Endpoints ะบะฐะปะตะฝะดะฐัั

| Endpoint | ะะตัะพะด | ะะฟะธัะฐะฝะธะต |
|----------|-------|----------|
| `/calendar/generate` | POST | ะะตะฝะตัะฐัะธั ะฝะพะฒะพะณะพ ะบะฐะปะตะฝะดะฐัั |
| `/calendar/day/{year}/{month}/{day}` | GET | ะะพะปััะธัั ะพะดะธะฝ ะดะตะฝั |
| `/calendar/day/{year}/{month}/{day}` | PATCH | ะะตะดะฐะบัะธัะพะฒะฐัั ะดะตะฝั |
| `/calendar/redistribute` | POST | ะะตัะตัะฐัะฟัะตะดะตะปะธัั ะฑัะดะถะตั |
| `/calendar/saved/{year}/{month}` | GET | ะะพะปััะธัั ัะพััะฐะฝะตะฝะฝัะน ะบะฐะปะตะฝะดะฐัั |
| `/calendar/current-month` | GET | ะขะตะบััะธะน ะผะตััั (shortcut) |
| `/calendar/shell` | POST | ะััััะพะต ะฟัะตะฒัั ะบะฐะปะตะฝะดะฐัั |

---

## 3.10 ะัะธะผะตั ะฟะพะปะฝะพะณะพ ัะฐััะตัะฐ

### ะัะพะดะฝัะต ะดะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปั:
```
ะะตะณะธะพะฝ: US-CA
ะะตัััะฝัะน ะดะพัะพะด: $6,000
ะะพะฟะพะปะฝะธัะตะปัะฝัะน ะดะพัะพะด: $0

ะคะธะบัะธัะพะฒะฐะฝะฝัะต ัะฐััะพะดั:
- ะัะตะฝะดะฐ: $1,800
- ะะพะผะผัะฝะฐะปัะฝัะต: $200
- ะกััะฐัะพะฒะบะฐ: $150
- ะะพะดะฟะธัะบะธ: $50

ะฆะตะปั ัะฑะตัะตะถะตะฝะธะน: $600/ะผะตััั

ะงะฐััะพัั ััะฐั:
- ะะตััะพัะฐะฝั: 8 ัะฐะท/ะผะตััั
- ะะพัะต: 4 ัะฐะทะฐ/ะฝะตะดะตะปั
- ะะฐะทะฒะปะตัะตะฝะธั: 4 ัะฐะทะฐ/ะผะตััั
- ะะดะตะถะดะฐ: 2 ัะฐะทะฐ/ะผะตััั
```

### ะจะฐะณ 1: ะะปะฐััะธัะธะบะฐัะธั ะดะพัะพะดะฐ
```
ะะพะดะพะฒะพะน ะดะพัะพะด: $6,000 ร 12 = $72,000
ะะตะณะธะพะฝ: US-CA
ะะพัะพะณ middle ะดะปั CA: $71,896 - $107,844

โ ะะปะฐัั: MIDDLE (Strategic Achiever)
```

### ะจะฐะณ 2: ะะฐััะตั ะฑัะดะถะตัะฐ
```
ะัะตะณะพ ะดะพัะพะด: $6,000
ะคะธะบัะธัะพะฒะฐะฝะฝัะต: $1,800 + $200 + $150 + $50 = $2,200
ะกะฑะตัะตะถะตะฝะธั: $600
ะะธัะบัะตัะธะพะฝะฝัะน: $6,000 - $2,200 - $600 = $3,200
```

### ะจะฐะณ 3: ะะฐัะฟัะตะดะตะปะตะฝะธะต ะดะธัะบัะตัะธะพะฝะฝะพะณะพ
```
ะะตัะฐ ะธะท ัะฐััะพั:
- ะะตััะพัะฐะฝั: 8/ะผะตััั
- ะะพัะต: 16/ะผะตััั (4 ร 4 ะฝะตะดะตะปะธ)
- ะะฐะทะฒะปะตัะตะฝะธั: 4/ะผะตััั
- ะะดะตะถะดะฐ: 2/ะผะตััั
- ะัะพัะตะต: ะพััะฐัะพะบ

Total weight units: 30

ะะฐัะฟัะตะดะตะปะตะฝะธะต $3,200:
- ะะตััะพัะฐะฝั: $3,200 ร (8/30) = $853
- ะะพัะต: $3,200 ร (16/30) = $1,707
- ะะฐะทะฒะปะตัะตะฝะธั: $3,200 ร (4/30) = $427
- ะะดะตะถะดะฐ: $3,200 ร (2/30) = $213
```

### ะจะฐะณ 4: ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะดะฝัะผ (ัะฝะฒะฐัั)

```
ะคะะะกะะะะะะะะซะ (FIXED pattern):
ะะตะฝั 1: $1,800 (rent) + $200 (utilities) + $150 (insurance) + $50 (subs) = $2,200

ะะะคะ (SPREAD pattern, 16 ะดะฝะตะน):
- $1,707 / 16 = $106.69/ะดะตะฝั
- ะะฝะธ: ะฒัะต ัะฐะฑะพัะธะต ะดะฝะธ

ะะะกะขะะะะะซ (CLUSTERED pattern, 8 ะดะฝะตะน):
- $853 / 8 = $106.63/ัะฐะท
- ะะฝะธ: ะฟั ะธ ัะฑ ะบะฐะถะดะพะน ะฝะตะดะตะปะธ

ะะะะะะะงะะะะฏ (CLUSTERED pattern, 4 ะดะฝั):
- $427 / 4 = $106.75/ัะฐะท
- ะะฝะธ: 4 ััะฑะฑะพัั ะผะตัััะฐ

ะะะะะะ (CLUSTERED pattern, 2 ะดะฝั):
- $213 / 2 = $106.50/ัะฐะท
- ะะฝะธ: 2 ััะฑะฑะพัั (1-ั ะธ 3-ั ะฝะตะดะตะปั)
```

### ะัะพะณะพะฒัะน ะบะฐะปะตะฝะดะฐัั (ัะฟัะพัะตะฝะฝะพ):

```
ะะตะฝั 1 (ัั):  $2,200 (fixed) + $107 (coffee) = $2,307
ะะตะฝั 2 (ัั):  $107 (coffee) = $107
ะะตะฝั 3 (ะฟั):  $107 (coffee) + $107 (dining) = $214
ะะตะฝั 4 (ัะฑ):  $107 (dining) + $107 (entertainment) + $107 (clothing) = $321
ะะตะฝั 5 (ะฒั):  $0
ะะตะฝั 6 (ะฟะฝ):  $107 (coffee) = $107
ะะตะฝั 7 (ะฒั):  $107 (coffee) = $107
ะะตะฝั 8 (ัั):  $107 (coffee) = $107
...
```

---

## 3.11 ะะปััะตะฒัะต ะฟัะธะฝัะธะฟั ัะผะฝะพะณะพ ัะฐัะฟัะตะดะตะปะตะฝะธั

1. **ะะต ัะฐะฒะฝะพะผะตัะฝะพะต** - ะธัะฟะพะปัะทััััั 3 ัะฐะฑะปะพะฝะฐ (spread/clustered/fixed)

2. **Time-aware** - ััะธััะฒะฐัััั ะดะฝะธ ะฝะตะดะตะปะธ (ัะฐะทะฒะปะตัะตะฝะธั ะฒ ะฒััะพะดะฝัะต)

3. **User-aware** - ัะฐััะพัั ะฑะตััััั ะธะท ะพะฝะฑะพัะดะธะฝะณะฐ ะฟะพะปัะทะพะฒะฐัะตะปั

4. **Income-aware** - ะฒัะต ะฟะพัะพะณะธ ะทะฐะฒะธััั ะพั ะบะปะฐััะฐ ะดะพัะพะดะฐ

5. **Location-aware** - ัะตะณะธะพะฝะฐะปัะฝัะต ะบะพััะตะบัะธะธ (CA ะดะพัะพะถะต TX)

6. **Cooldown periods** - ะฟัะตะดะพัะฒัะฐัะตะฝะธะต ัะฐัััั ะฟะพะบัะฟะพะบ ะฒ ะพะดะฝะพะน ะบะฐัะตะณะพัะธะธ

7. **No consecutive same-category days** - ะฝะตั ะฟะพะบัะฟะพะบ ะพะดะตะถะดั 2 ะดะฝั ะฟะพะดััะด

8. **Weekend concentration** - ะดะธัะบัะตัะธะพะฝะฝัะต ััะฐัั ะบะพะฝัะตะฝััะธัััััั ะฝะฐ ะฒััะพะดะฝัั

9. **Behavioral economics** - ััะธััะฒะฐะตั ัะตะฐะปัะฝะพะต ะฟะพะฒะตะดะตะฝะธะต ะปัะดะตะน

10. **Dynamic thresholds** - ะฒัั ะฟะฐัะฐะผะตััะธะทะพะฒะฐะฝะพ, ะฝะต hardcoded

---

# ะะฐะบะปััะตะฝะธะต

ะญัะพั ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั ััะธ ะบะปััะตะฒัะต ัะฐััะธ MITA:

1. **ะะฝะฑะพัะดะธะฝะณ** - ัะฑะพั ะดะฐะฝะฝัั ะทะฐ 7 ัะฐะณะพะฒ ะดะปั ะฟะตััะพะฝะฐะปะธะทะฐัะธะธ
2. **Home Screen** - ะพัะพะฑัะฐะถะตะฝะธะต ัะธะฝะฐะฝัะพะฒะพะน ัะธััะฐัะธะธ ั 9 ะฒะธะดะถะตัะฐะผะธ
3. **ะะฐะปะตะฝะดะฐัั/ะัะดะถะตั** - ัะผะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต ั ััะตัะพะผ ะบะปะฐััะฐ ะดะพัะพะดะฐ ะธ ะฟะพะฒะตะดะตะฝะธั

ะัะฝะพะฒะฝะฐั ะธะดะตั ัะธััะตะผั: **ะฝะต ะฟัะพััะพ ะดะตะปะธัั ะฑัะดะถะตั ะฟะพัะพะฒะฝั, ะฐ ะผะพะดะตะปะธัะพะฒะฐัั ัะตะฐะปัะฝะพะต ะฟะพะฒะตะดะตะฝะธะต ัะตะปะพะฒะตะบะฐ ั ััะตัะพะผ ะตะณะพ ะดะพัะพะดะฐ, ะปะพะบะฐัะธะธ ะธ ะฟัะธะฒััะตะบ.**
