# MITA Finance - Staging Environment Configuration
# =======================================================
# Environment: Staging
# Purpose: Pre-production testing with production-like settings
# Security: Real secrets required, production security posture
# =======================================================

# ========================================
# ENVIRONMENT IDENTIFICATION
# ========================================
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=INFO  # Production-like logging level

# ========================================
# DATABASE CONFIGURATION
# ========================================
# Staging PostgreSQL - Replace with actual staging credentials
DATABASE_URL=postgresql+asyncpg://postgres:REPLACE_WITH_STAGING_DB_PASSWORD@postgres:5432/mita_staging
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_WITH_STAGING_DB_PASSWORD
POSTGRES_DB=mita_staging
POSTGRES_PORT=5432

# ========================================
# REDIS CONFIGURATION
# ========================================
# Staging Redis - Replace with actual staging credentials
REDIS_URL=redis://:REPLACE_WITH_STAGING_REDIS_PASSWORD@redis:6379/1
REDIS_PASSWORD=REPLACE_WITH_STAGING_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=20
REDIS_TIMEOUT=30
REDIS_RETRY_ON_TIMEOUT=true

# ========================================
# SECURITY & AUTHENTICATION
# ========================================
# Staging secrets - Replace with actual staging secrets
JWT_SECRET=REPLACE_WITH_STAGING_JWT_SECRET_32_CHARS_MINIMUM
JWT_PREVIOUS_SECRET=REPLACE_WITH_PREVIOUS_STAGING_JWT_SECRET
SECRET_KEY=REPLACE_WITH_STAGING_SECRET_KEY_32_CHARS_MINIMUM
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30  # Production-like token expiry

# ========================================
# EXTERNAL SERVICES
# ========================================
# OpenAI API - Replace with actual staging key
OPENAI_API_KEY=REPLACE_WITH_STAGING_OPENAI_API_KEY
OPENAI_MODEL=gpt-4o-mini

# Firebase/Google Cloud - Staging service account
GOOGLE_APPLICATION_CREDENTIALS=/app/secrets/firebase-service-account-staging.json

# Apple App Store - Replace with actual staging secret
APPSTORE_SHARED_SECRET=REPLACE_WITH_STAGING_APPSTORE_SHARED_SECRET

# Apple Push Notifications - Staging configuration
APNS_KEY=/app/secrets/apns-key-staging.p8
APNS_KEY_ID=REPLACE_WITH_STAGING_APNS_KEY_ID
APNS_TEAM_ID=REPLACE_WITH_STAGING_APNS_TEAM_ID
APNS_TOPIC=com.mita.finance.staging
APNS_USE_SANDBOX=true

# ========================================
# EMAIL CONFIGURATION
# ========================================
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=REPLACE_WITH_STAGING_SENDGRID_API_KEY
SMTP_FROM=noreply-staging@mita.finance

# ========================================
# MONITORING & LOGGING
# ========================================
SENTRY_DSN=REPLACE_WITH_STAGING_SENTRY_DSN
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# ========================================
# CORS & SECURITY
# ========================================
ALLOWED_ORIGINS=https://staging.mita.finance,https://staging-admin.mita.finance

# ========================================
# INFRASTRUCTURE
# ========================================
BACKEND_PORT=8000
GRAFANA_PASSWORD=REPLACE_WITH_STAGING_GRAFANA_PASSWORD

# ========================================
# BACKUP & STORAGE
# ========================================
AWS_ACCESS_KEY_ID=REPLACE_WITH_STAGING_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_STAGING_AWS_SECRET_KEY
AWS_DEFAULT_REGION=us-east-1
BACKUP_BUCKET=mita-staging-backups

# ========================================
# KUBERNETES & DEPLOYMENT
# ========================================
NAMESPACE=mita-staging
CLUSTER_NAME=mita-staging-cluster

# ========================================
# STAGING FEATURE FLAGS
# ========================================
FEATURE_FLAGS_DEBUG_LOGGING=false
FEATURE_FLAGS_ENHANCED_RATE_LIMITING=true
FEATURE_FLAGS_CIRCUIT_BREAKER=true
FEATURE_FLAGS_ADMIN_ENDPOINTS=true
FEATURE_FLAGS_ADVANCED_OCR=true
FEATURE_FLAGS_AI_BUDGET_ANALYSIS=true
FEATURE_FLAGS_JWT_ROTATION=true
FEATURE_FLAGS_PUSH_NOTIFICATIONS=true
FEATURE_FLAGS_DETAILED_ANALYTICS=true

# ========================================
# STAGING TASK QUEUE
# ========================================
WORKER_MAX_JOBS=50
WORKER_JOB_TIMEOUT=300
ENABLE_WORKER_AUTOSCALING=true
ENABLE_TASK_METRICS=true